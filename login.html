<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>LMS</title>
    <link rel="stylesheet" href="assets/style.css" />
  </head>
  <body class="landing-page">
    <main class="landing-page__form">
      <h1 class="logo">
        <img
          src="assets/images/logo.svg"
          alt="KnowledgeCity Learning Solutions"
        />
      </h1>
      <section class="instructions">
        <p>Welcome to the Learning Management System</p>
        <small>Please log in to continue</small>
      </section>
      <form action="" id="login" method="POST">
        <input
          type="text"
          name="username"
          id="username"
          aria-label="Username"
          placeholder="Username"
          required
          class="input--with-icon input--icon-left input--user"
        />

        <input
          type="password"
          name="password"
          id="password"
          aria-label="Password"
          placeholder="Password"
          minlength="6"
          required
          class="input--with-icon input--icon-left input--password"
        />
        <label for="remember" class="remember"
          ><input type="checkbox" name="remember" id="remember" /> Remember
          me</label
        >
        <button type="submit" class="button--landing-page input--with-icon">
          Log in
        </button>
      </form>
    </main>
    <script>
      let username = document.querySelector('#username').value;
      let password = document.querySelector('#password').value;

      handleSubmit = event => {
        event.preventDefault();
        fetch(
          '/knowledgecity/api/api_user/post.php',
          {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({
              api_user_username: username,
              api_user_password: password
            })
          } // send data
        )
          // .then(response => response.json())
          // .then(data => console.log(data))
          .catch(error => {
            // Handle errors (if any)
            console.log(error);
          });
      };

      document
        .querySelector('#login')
        .addEventListener('submit', handleSubmit, false);
    </script>
  </body>
</html>
